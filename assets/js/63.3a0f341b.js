(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{360:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"vue3-状态管理-pinia"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue3-状态管理-pinia"}},[t._v("#")]),t._v(" Vue3 状态管理 - Pinia")]),t._v(" "),s("h2",{attrs:{id:"_1-什么是pinia"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是pinia"}},[t._v("#")]),t._v(" 1. 什么是Pinia")]),t._v(" "),s("p",[t._v("Pinia 是 Vue 的专属的最新状态管理库 ，是 Vuex 状态管理工具的替代品\n"),s("img",{staticClass:"lazy",attrs:{alt:"image.png","data-src":"https://whh-bucket.oss-cn-guangzhou.aliyuncs.com/image/31.png",loading:"lazy"}})]),t._v(" "),s("h2",{attrs:{id:"_2-手动添加pinia到vue项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-手动添加pinia到vue项目"}},[t._v("#")]),t._v(" 2. 手动添加Pinia到Vue项目")]),t._v(" "),s("p",[t._v("后面在实际开发项目的时候，Pinia可以在项目创建时自动添加，现在我们初次学习，从零开始：")]),t._v(" "),s("ol",[s("li",[t._v("使用 Vite 创建一个空的 Vue3项目")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init vite@latest\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("按照官方文档安装 pinia 到项目中")])]),t._v(" "),s("h2",{attrs:{id:"_3-pinia基础使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-pinia基础使用"}},[t._v("#")]),t._v(" 3. Pinia基础使用")]),t._v(" "),s("ol",[s("li",[t._v("定义store")]),t._v(" "),s("li",[t._v("组件使用store")])]),t._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"image.png","data-src":"https://whh-bucket.oss-cn-guangzhou.aliyuncs.com/image/32.png",loading:"lazy"}})]),t._v(" "),s("h2",{attrs:{id:"_4-getters实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-getters实现"}},[t._v("#")]),t._v(" 4. getters实现")]),t._v(" "),s("p",[t._v("Pinia中的 getters 直接使用 computed函数 进行模拟, 组件中需要使用需要把 getters return出去")]),t._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"image.png","data-src":"https://whh-bucket.oss-cn-guangzhou.aliyuncs.com/image/33.png",loading:"lazy"}})]),t._v(" "),s("h2",{attrs:{id:"_5-action异步实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-action异步实现"}},[t._v("#")]),t._v(" 5. action异步实现")]),t._v(" "),s("p",[t._v("方式：异步action函数的写法和组件中获取异步数据的写法完全一致")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("接口地址：http://geek.itheima.net/v1_0/channels")])]),t._v(" "),s("li",[s("p",[t._v("请求方式：get")])]),t._v(" "),s("li",[s("p",[t._v("请求参数：无")])])]),t._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"image.png","data-src":"https://whh-bucket.oss-cn-guangzhou.aliyuncs.com/image/34.png",loading:"lazy"}})]),t._v(" "),s("p",[t._v("需求：在Pinia中获取频道列表数据并把数据渲染App组件的模板中\n"),s("img",{staticClass:"lazy",attrs:{alt:"image.png","data-src":"https://whh-bucket.oss-cn-guangzhou.aliyuncs.com/image/35.png",loading:"lazy"}})]),t._v(" "),s("h2",{attrs:{id:"_6-storetorefs工具函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-storetorefs工具函数"}},[t._v("#")]),t._v(" 6. storeToRefs工具函数")]),t._v(" "),s("p",[t._v("使用storeToRefs函数可以辅助保持数据（state + getter）的响应式解构\n"),s("img",{staticClass:"lazy",attrs:{alt:"image.png","data-src":"https://whh-bucket.oss-cn-guangzhou.aliyuncs.com/image/36.png",loading:"lazy"}})]),t._v(" "),s("h2",{attrs:{id:"_7-pinia的调试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-pinia的调试"}},[t._v("#")]),t._v(" 7. Pinia的调试")]),t._v(" "),s("p",[t._v("Vue官方的 dev-tools 调试工具 对 Pinia直接支持，可以直接进行调试\n"),s("img",{staticClass:"lazy",attrs:{alt:"image.png","data-src":"https://whh-bucket.oss-cn-guangzhou.aliyuncs.com/image/37.png",loading:"lazy"}})]),t._v(" "),s("h2",{attrs:{id:"_8-pinia持久化插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-pinia持久化插件"}},[t._v("#")]),t._v(" 8. Pinia持久化插件")]),t._v(" "),s("p",[t._v("官方文档：https://prazdevs.github.io/pinia-plugin-persistedstate/zh/")]),t._v(" "),s("ol",[s("li",[t._v("安装插件 pinia-plugin-persistedstate")])]),t._v(" "),s("div",{staticClass:"language-jsx line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[t._v("npm i pinia"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("plugin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("persistedstate\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("使用 main.js")])]),t._v(" "),s("div",{staticClass:"language-jsx line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" persist "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pinia-plugin-persistedstate'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createPinia")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("persist"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("配置 store/counter.js")])]),t._v(" "),s("div",{staticClass:"language-jsx line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineStore "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pinia'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" computed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" useCounterStore "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'counter'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    doubleCount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    increment\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("persist")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("ol",{attrs:{start:"4"}},[s("li",[t._v("其他配置，看官网文档即可")])])])}),[],!1,null,null,null);s.default=e.exports}}]);